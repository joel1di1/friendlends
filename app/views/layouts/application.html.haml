!!!
%html(xmlns="http://www.w3.org/1999/xhtml"
      xmlns:fb="http://www.facebook.com/2008/fbml")
  %head
    %meta{:content => "text/html;charset=UTF-8", "http-equiv" => "content-type"}/
    %title 
      = t :title
    = stylesheet_link_tag :all
    
    = fb_connect_javascript_tag(:lang => ::I18n.locale)
    = javascript_include_tag :defaults, 'devise.facebook_connectable'
    = javascript_include_tag 'http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'
    
    = yield(:head)
  %body
    %script
      jQuery.noConflict();
    = init_fb_connect :XFBML, :js => :jquery
    %center
      #container
        .user_nav
          - if user_signed_in?
            = t :sign_in_as
            - if current_user.facebook_uid? 
              TOTO
              %b #{current_user.username}
              :plain
                <div class="facebook_connect_link sign_out">          
                  <form action="/users/sign_out?locale=fr" id="fb_connect_sign_out_form" method="get" style="display:none;">
                </form>
                <a href="#" onclick="try {
                  FB.Connect.logoutAndRedirect(&quot;/users/sign_out?locale=fr&quot;);
                } catch (e) { alert('RJS error:\n\n' + e.toString()); alert('FB.Connect.logoutAndRedirect(\&quot;/users/sign_out?locale=fr\&quot;);'); throw e }; return false;">Sign out</a></div>
                </div>
            - else
              %b #{current_user.email}
              = link_to t(:sign_out), destroy_user_session_path
        .change_locale 
          = link_to t(:change_locale), I18n.locale == :en ? '/?locale=fr' : '/?locale=en'
        %p.notice= notice
        %p.alert= alert
        
        = yield

  